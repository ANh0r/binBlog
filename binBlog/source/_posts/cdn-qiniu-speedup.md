---
title: 论如何优雅的在md文档中插入图片————七牛云到客户端的部署
date: 2020-08-25 18:32:24
tags: Guidance
cover: http://pictures.ryanhor.com/20200825185304.png
---

## Chapter 1

在一个惬意的下午，泡好一杯茶，打开电脑准备开始下午的码字，然后写到一半，开始找配图\
![](http://pictures.ryanhor.com/20200825190145.png)
找了好久，终于复制了图片网址，然后开始
```bash
>!
>[]
>（https://………………）
```
过了好久,发现自己图片的链接失效了……
这么一通操作下来，找图片花费的时间多不说，图片资源的稳定性也有待商榷，而且自己写博客或者码字的心情直接被消耗了一大半。
所以正式的插入方式应该是什么呢？

## Chapter 2

现在的我写博客是这样的：\
Step 1: 做封面
Step 2: 客户端`自动`读取剪贴板的图片，`自动`上传到图床
![](http://pictures.ryanhor.com/20200825204108.png)
Step3 : 点击一下复制出`md格式`的链接，粘贴

看见那几个自动没有？这就是客户端和图床自动实现的了！\
个人用的是七牛云的CDN + PicGo实现自动上传，下面就要介绍一下提到的两个操作啦！ 
（本文都是以这种操作插入图片的，实测如果是截图上传，得到md格式的链接不超过3s)

## Chapter 3

### 1.七牛云的部署
\
其实除了七牛云，腾讯云的COS和阿里云的OSS都是可以实现上述操作的，但是由于七牛做的早，我接触的也早一些，凭借着微微的时间优势我还是选择的七牛云。

#### 创建步骤：

* 进入 [`七牛云`](https://www.qiniu.com/) 官方网站，申请账号
* 进入管理控制台，选择对象储存
![](http://pictures.ryanhor.com/20200825210230.png)
* 点击储存管理，新建空间，`记住这个名字`
![](http://pictures.ryanhor.com/20200825210417.png)
* 根据提示创建空间，注意要生成CDN外链连接需要设置公开储存
![](http://pictures.ryanhor.com/20200825210448.png)
* 选择左侧栏CDN
![](http://pictures.ryanhor.com/20200825210657.png)
* 选择域名管理，添加域名
>注意，测试域名不能直接线上测试，需要绑定自己已经拥有的域名\
备案非必须，但是`未经过备案的加速域名只能加速海外网址`
![](http://pictures.ryanhor.com/20200825211108.png)
\
>几点说明:
 > 1. 域名类型一般选择普通域名，即通过此云储存生成的外链链接都是以下框中的加速域名为host进行CDN加速的，泛域名和子泛域名在介绍中有所解释，不多赘述
 > 2. HTTP和HTTPS的区别在于，后者生成的外链是具有SSL证书，且能通过安全性检测的，对需要加密传输的图片文门来说会有帮助，但是`HTTP也是可以生成外链链接并应用到网站的`
 > 3. 七牛云的官方文档解释，所有`非HTTPS链接`流量会有10G的免费限额，注意，如果是HTTPS外链是需要额外收费的
 > 4. 需要生成HTTPS外链的，需要再域名设置时在七牛的证书托管中托管对应加速域名的证书，并选择。
 ![](http://pictures.ryanhor.com/20200825212127.png)

 * 域名成功添加之后，就完成了一大半了！接下来需要在域名的DNS解析设置中绑定CNAME解析，详情在七牛的官方文档[如何设置域名的CNAME](https://developer.qiniu.com/fusion/kb/1322/how-to-configure-cname-domain-name)有所涉及。

 七牛云云端设置到这里就告一段落了，之后是本地客户端的设置。

 ### 2.PicGO配置

 [PicGo](https://github.com/Molunerfinn/PicGo/releases) 的下载地址在Github Assets，按需下载，下面以macOS PicGo2.3.0为例。

 * 软件界面，`*`必填，不带`*`选填，可以不填
 ![](http://pictures.ryanhor.com/20200825213022.png)
 > 1. AK,SK的获取\
 在右上角头像-秘钥管理
 ![](http://pictures.ryanhor.com/20200825213248.png)
 之后获取，粘贴到PicGo对应位置即可
 ![](http://pictures.ryanhor.com/20200825213323.png)
  > 2. 设定空间储存名，填写在七牛处记住的储存空间名
  > 3. 设定储存网址：加速域名对应的网址，注意需要添加`https://`或者是`http://`（根据自己设置选择）
  > 4. [储存区域](https://developer.qiniu.com/kodo/manual/1671/region-endpoint)

 * 确认之后，随手截图一张，点开状态栏就能查看啦

在剪贴板有图片时，状态为:\
![](http://pictures.ryanhor.com/20200825213947.png)
点击图片可以上传，状态会变为:\
![](http://pictures.ryanhor.com/20200825214041.png)
在此状态下点击图片，即可获得格式为`![](http://123456xxx.png)`的文本，粘贴到文档即可。


怎么样，是不是一套流程下来，收获颇多呢~



